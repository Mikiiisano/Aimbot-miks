local aimbotEnabled = false
local menuVisible = false
local accuracy = 1
local aimSpeed = 0.1

-- Crear interfaz gráfica (GUI)
local ScreenGui = Instance.new("ScreenGui")
local ToggleButton = Instance.new("TextButton")
local MenuFrame = Instance.new("Frame")
local CloseButton = Instance.new("TextButton")
local AccuracySlider = Instance.new("Slider")
local AimSpeedSlider = Instance.new("Slider")

-- Configuración de los elementos del GUI
ScreenGui.Name = "AimbotGUI"
ScreenGui.Parent = game.CoreGui

ToggleButton.Name = "ToggleButton"
ToggleButton.Parent = ScreenGui
ToggleButton.Text = "Aimbot"
ToggleButton.Size = UDim2.new(0, 100, 0, 50)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)
ToggleButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)

MenuFrame.Name = "MenuFrame"
MenuFrame.Parent = ScreenGui
MenuFrame.Size = UDim2.new(0, 300, 0, 200)
MenuFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
MenuFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MenuFrame.Visible = false

CloseButton.Name = "CloseButton"
CloseButton.Parent = MenuFrame
CloseButton.Text = "X"
CloseButton.Size = UDim2.new(0, 50, 0, 50)
CloseButton.Position = UDim2.new(1, -60, 0, 10)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Barra de precisión
AccuracySlider.Name = "AccuracySlider"
AccuracySlider.Parent = MenuFrame
AccuracySlider.Size = UDim2.new(0, 200, 0, 50)
AccuracySlider.Position = UDim2.new(0.5, -100, 0.2, 0)
AccuracySlider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)

-- Barra de velocidad de apuntado
AimSpeedSlider.Name = "AimSpeedSlider"
AimSpeedSlider.Parent = MenuFrame
AimSpeedSlider.Size = UDim2.new(0, 200, 0, 50)
AimSpeedSlider.Position = UDim2.new(0.5, -100, 0.4, 0)
AimSpeedSlider.BackgroundColor3 = Color3.fromRGB(70, 70, 70)

-- Funciones de GUI
ToggleButton.MouseButton1Click:Connect(function()
    aimbotEnabled = not aimbotEnabled
    ToggleButton.Text = aimbotEnabled and "Aimbot ON" or "Aimbot OFF"
    MenuFrame.Visible = aimbotEnabled and not menuVisible
end)

CloseButton.MouseButton1Click:Connect(function()
    menuVisible = false
    MenuFrame.Visible = false
end)

MenuFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        menuVisible = not menuVisible
        MenuFrame.Visible = menuVisible
    end
end)

-- Función principal del aimbot
local runService = game:GetService("RunService")

runService.RenderStepped:Connect(function()
    if aimbotEnabled then
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local hrp = character:WaitForChild("HumanoidRootPart")
        local closestPlayer = nil
        local closestDistance = math.huge

        -- Buscar el jugador más cercano
        for _, target in ipairs(game.Players:GetPlayers()) do
            if target ~= player and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local targetHRP = target.Character.HumanoidRootPart
                local distance = (hrp.Position - targetHRP.Position).magnitude

                if distance < closestDistance then
                    closestDistance = distance
                    closestPlayer = target
                end
            end
        end

        if closestPlayer then
            local targetHRP = closestPlayer.Character.HumanoidRootPart
            local aimPosition = targetHRP.Position + (targetHRP.Velocity * accuracy) -- Predicción simple

            -- Ajustar la cámara hacia el objetivo
            local camera = workspace.CurrentCamera
            local direction = (aimPosition - hrp.Position).unit
            camera.CFrame = CFrame.new(hrp.Position, hrp.Position + direction)
        end
    end
end)
